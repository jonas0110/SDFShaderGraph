!function(t){var e={};function o(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){o(1),o(2),t.exports=o(3)},function(t,e){window.nodeSubGraph=function(t,e){this._ctor(t,e)},nodeSubGraph.prototype._ctor=function(t,e){this.nodes=jQuery.extend(!0,{},t),this.boundary=20,this.properties={name:"unnamed"},this.title_width=LiteGraph.NODE_MIN_WIDTH,this.rect=this.calculateSize(),this.graph=e,this.id=-1,this.type="subGraph",this.links=[],this.flags={};var o=Object.values(this.nodes).map(t=>t.title),i=Object.values(this.nodes).map(t=>t.id),r=Object.values(this.nodes).map(t=>t.inputs);for(var s in this.properties.hash="",r){var p=r[s];if(p){var n=p.map(t=>t.link);for(var u of n)if(u){var a=e.links[u].origin_id,d=e.links[u].origin_slot,h=e.links[u].target_id,c=e.links[u].target_slot;if(-1!=i.indexOf(a)){this.links.push(e.links[u]);var g="|"+o[i.indexOf(a)];g+="_"+d+":",g+=o[i.indexOf(h)],g+="_"+c,o[i.indexOf(h)]+=g}}}}for(var l of(o.sort(),o))this.properties.hash+=l+";"},nodeSubGraph.prototype.calculateSize=function(){var t=[],e=[],o=[],i=[];for(var r of Object.values(this.nodes))t.push(r.pos[0]),o.push(r.pos[1]),e.push(r.pos[0]+r.size[0]),i.push(r.pos[1]+r.size[1]);t.sort(function(t,e){return t-e}),o.sort(function(t,e){return t-e}),e.sort(function(t,e){return e-t}),i.sort(function(t,e){return e-t});var s={pos:[t[0]-this.boundary,o[0]-this.boundary],size:[e[0]-t[0]+2*this.boundary,i[0]-o[0]+2*this.boundary]};return s.center=[s.pos[0]+s.size[0]/2,s.pos[1]+s.size[1]/2],s},nodeSubGraph.prototype.serialize=function(){var t=[];for(var e in this.nodes){var o=this.nodes[e].serialize();t.push(o),o.pos=this.nodes[e].pos,console.log(o.inputs)}return console.log("nodes saved:",t),{type:"subGraph",title:this.title,nodes:t,name:this.properties.name}}},function(t,e){function o(){this._ctor(o.title),this.addOutput("result","",{float:1}),this.addInput("a","",{float:1}),this.addInput("b","",{float:1}),this.addInput("k","",{float:1}),this.properties.name="",this.options=this.options||{},this.properties.optType="min",this.options.optType={multichoice:["min","max"],reloadonchange:1},this.shader_piece=new g}function i(){this._ctor(i.title),this.addOutput("result","",{vec2:1}),this.addInput("a","",{vec2:1}),this.addInput("b","",{vec2:1}),this.addInput("k","",{float:1}),this.properties={name:""},this.options=this.options||{},this.shader_piece=new l}function r(){this._ctor(r.title),this.addOutput("result","",{float:1}),this.addInput("p","",{vec3:1}),this.addInput("s","",{float:1}),this.properties={name:""},this.options=this.options||{},this.shader_piece=new y}function s(){this._ctor(s.title),this.addOutput("result","",{float:1}),this.addInput("p","",{vec3:1}),this.addInput("r","",{vec3:1}),this.properties={name:""},this.options=this.options||{},this.shader_piece=new m}function n(){this._ctor(n.title),this.addOutput("result","",{vec4:1}),this.addInput("d1","",{vec4:1}),this.addInput("d2","",{vec4:1}),this.properties={name:""},this.options=this.options||{},this.shader_piece=new C}function u(){this._ctor(u.title),this.addOutput("result","",{float:1}),this.addInput("p","",{vec3:1}),this.addInput("a","",{vec3:1}),this.addInput("b","",{vec3:1}),this.addInput("r1","",{float:1}),this.addInput("r2","",{float:1}),this.options=this.options||{},this.shader_piece=new _,this.properties={name:""}}function a(){this._ctor(a.title),this.addOutput("result","",{float:1}),this.addInput("p","",{float:1}),this.options=this.options||{},this.properties={name:""},this.shader_piece=new y}function d(){this._ctor(d.title),this.addOutput("result","",{float:1}),this.addInput("r1","",{float:1}),this.addInput("r2","",{float:1}),this.addInput("r3","",{float:1}),this.addInput("r4","",{float:1}),this.options=this.options||{},this.properties={name:""},this.shader_piece=new y}function h(){this._ctor(h.title),this.addOutput("result","",{vec3:1}),this.output_types={vec3:1},this.options=this.options||{},this.properties={name:""},this.shader_piece=new T}function c(){this._ctor(c.title),this.addOutput("result","",{float:1}),this.output_types={float:1},this.options=this.options||{},this.shader_piece=new v}function g(){this.id="smooth",this.includes={}}function l(){this.id="smooth2d",this.includes={}}function y(){this.id="sdSphere",this.includes={}}function m(){this.id="sdEllipsoid",this.includes={}}function C(){this.id="opU",this.includes={}}function _(){this.id="sdStick",this.includes={}}function f(){this.id="sign",this.includes={}}function O(){this.id="mat2",this.includes={}}function T(){this.id="pos",this.includes={}}function v(){this.id="atime",this.includes={}}o.title="smooth",o.desc="smooth",o.prototype.onExecute=function(){},o.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE,i=this.getInputCode(2)||LiteGraph.EMPTY_CODE;if(e&&o&&i){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var r=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"smooth_"+this.id:this.properties.name,out_type:this.getOutputType(),a:e.getOutputVar(),b:o.getOutputVar(),k:i.getOutputVar(),optType:this.properties.optType,scope:t,order:this.order});r.merge(e),r.merge(o),r.merge(i)}else this.codes[0]=LiteGraph.EMPTY_CODE},o.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+o.title,o),i.title="smooth2d",i.desc="smooth2d",i.prototype.onExecute=function(){},i.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE,i=this.getInputCode(2)||LiteGraph.EMPTY_CODE;if(e&&o&&i){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var r=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"smooth2d_"+this.id:this.properties.name,out_type:this.getOutputType(),a:e.getOutputVar(),b:o.getOutputVar(),k:i.getOutputVar(),scope:t,order:this.order});r.merge(e),r.merge(o),r.merge(i)}else this.codes[0]=LiteGraph.EMPTY_CODE},i.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+i.title,i),r.title="sdSphere",r.desc="sdSphere",r.prototype.onExecute=function(){},r.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE;if(e&&o){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var i=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"sdSphere_"+this.id:this.properties.name,out_type:this.getOutputType(),p:e.getOutputVar(),s:o.getOutputVar(),scope:t,order:this.order});i.merge(e),i.merge(o)}else this.codes[0]=LiteGraph.EMPTY_CODE},r.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+r.title,r),s.title="sdEllipsoid",s.desc="sdEllipsoid",s.prototype.onExecute=function(){},s.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE;if(e&&o){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var i=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"sdEllipsoid_"+this.id:this.properties.name,out_type:this.getOutputType(),p:e.getOutputVar(),r:o.getOutputVar(),scope:t,order:this.order});i.merge(e),i.merge(o)}else this.codes[0]=LiteGraph.EMPTY_CODE},s.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+s.title,s),n.title="popU",n.desc="popU",n.prototype.onExecute=function(){},n.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE;if(e&&o){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var i=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"popU_"+this.id:this.properties.name,out_type:this.getOutputType(),d1:e.getOutputVar(),d2:o.getOutputVar(),scope:t,order:this.order});i.merge(e),i.merge(o)}else this.codes[0]=LiteGraph.EMPTY_CODE},n.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+n.title,n),u.title="sdStick",u.desc="sdStick",u.prototype.onExecute=function(){},u.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE,i=this.getInputCode(2)||LiteGraph.EMPTY_CODE,r=this.getInputCode(3)||LiteGraph.EMPTY_CODE,s=this.getInputCode(4)||LiteGraph.EMPTY_CODE;if(e&&o&&i&&r&&s){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var p=this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"sdStick_"+this.id:this.properties.name,out_type:this.getOutputType(),p:e.getOutputVar(),a:o.getOutputVar(),b:i.getOutputVar(),r1:r.getOutputVar(),r2:s.getOutputVar(),scope:t,order:this.order});p.merge(e),p.merge(o),p.merge(i),p.merge(r),p.merge(s)}else this.codes[0]=LiteGraph.EMPTY_CODE},u.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+u.title,u),a.title="sign",a.desc="sign",a.prototype.onExecute=function(){},a.prototype.processInputCode=function(t){var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE;e?(this.outputs[0].name=""==this.properties.name?"result":this.properties.name,(this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"sign_"+this.id:this.properties.name,out_type:this.getOutputType(),p:e.getOutputVar(),scope:t,order:this.order})).merge(e)):this.codes[0]=LiteGraph.EMPTY_CODE},a.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+a.title,a),d.title="mat2",d.desc="mat2",d.prototype.onExecute=function(){},d.prototype.processInputCode=function(t){this.outputs[0].name=""==this.properties.name?"result":this.properties.name;var e=this.getInputCode(0)||LiteGraph.EMPTY_CODE,o=this.getInputCode(1)||LiteGraph.EMPTY_CODE,i=this.getInputCode(2)||LiteGraph.EMPTY_CODE,r=this.getInputCode(3)||LiteGraph.EMPTY_CODE;e&&o&&i&&r?(this.outputs[0].name=""==this.properties.name?"result":this.properties.name,(this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"mat2_"+this.id:this.properties.name,out_type:this.getOutputType(),r1:e.getOutputVar(),r2:o.getOutputVar(),r3:i.getOutputVar(),r4:r.getOutputVar(),is_global:!0,scope:t,order:this.order})).merge(p)):this.codes[0]=LiteGraph.EMPTY_CODE},d.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("math/"+d.title,d),h.title="pos",h.desc="pos",h.prototype.onExecute=function(){},h.prototype.processInputCode=function(t){this.outputs[0].name=""==this.properties.name?"result":this.properties.name,this.codes[0]=this.shader_piece.getCode({out_var:""==this.properties.name?"pos_"+this.id:this.properties.name,out_type:this.getOutputType(),scope:t,order:this.order})},h.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("constants/"+h.title,h),c.title="atime",c.desc="atime",c.prototype.onExecute=function(){},c.prototype.processInputCode=function(t){this.codes[0]=this.shader_piece.getCode({out_var:"atime_"+this.id,out_type:this.getOutputType(),scope:t,order:this.order})},c.prototype.getOutputType=function(){var t=this.output_types?this.output_types:this.T_out_types;return LiteGraph.getOtputTypeFromMap(t)},LiteGraph.registerNodeType("constants/"+c.title,c),g.prototype.getVertexCode=function(t,e,o,i,r,s,p){if(p==CodePiece.VERTEX||p==CodePiece.BOTH)return"float h =max("+r+"-abs("+o+"-"+i+"),0.0);\n"+t+" "+e+"="+s+"("+o+","+i+") -h*h*0.25/"+r+";\n"},g.prototype.getFragmentCode=function(t,e,o,i,r,s,p){if(p==CodePiece.FRAGMENT||p==CodePiece.BOTH)return t+" "+e+"=smin("+o+","+i+","+r+");\n"},g.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.a,r=t.b,s=t.k,p=t.optType,n=t.scope,u=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,a=new CodePiece(u);a.setBody(this.getVertexCode(o,e,i,r,s,p,n)),a.setIncludesFromMap(this.includes);var d=new CodePiece(u);return d.setBody(this.getFragmentCode(o,e,i,r,s,p,n)),d.setIncludesFromMap(this.includes),new ShaderCode(a,d,e)},l.prototype.getVertexCode=function(t,e,o,i,r,s){if(s==CodePiece.VERTEX||s==CodePiece.BOTH)return"float h =clamp(0.5+0.5*("+i+".x-"+o+".x)/"+r+",0.0,1.0);\n"+t+" "+e+"=mix("+i+","+o+",h) -"+r+"*h*(1.0-h);\n"},l.prototype.getFragmentCode=function(t,e,o,i,r,s){if(s==CodePiece.FRAGMENT||s==CodePiece.BOTH)return t+" "+e+"=smin2("+o+","+i+","+r+");\n"},l.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.a,r=t.b,s=t.k,p=t.scope,n=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,u=new CodePiece(n);u.setBody(this.getVertexCode(o,e,i,r,s,p)),u.setIncludesFromMap(this.includes);var a=new CodePiece(n);return a.setBody(this.getFragmentCode(o,e,i,r,s,p)),a.setIncludesFromMap(this.includes),new ShaderCode(u,a,e)},y.prototype.getVertexCode=function(t,e,o,i,r){if(r==CodePiece.VERTEX||r==CodePiece.BOTH)return t+" "+e+"=length("+o+")-"+i+";\n"},y.prototype.getFragmentCode=function(t,e,o,i,r){if(r==CodePiece.FRAGMENT||r==CodePiece.BOTH)return t+" "+e+"=sdSphere("+o+","+i+");\n"},y.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.p,r=t.s,s=t.scope,p=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,n=new CodePiece(p);n.setBody(this.getVertexCode(o,e,i,r,s)),n.setIncludesFromMap(this.includes);var u=new CodePiece(p);return u.setBody(this.getFragmentCode(o,e,i,r,s)),u.setIncludesFromMap(this.includes),new ShaderCode(n,u,e)},m.prototype.getVertexCode=function(t,e,o,i,r){if(r==CodePiece.VERTEX||r==CodePiece.BOTH)return t+" "+e+"= sdEllipsoid("+o+","+i+");\n"},m.prototype.getFragmentCode=function(t,e,o,i,r){if(r==CodePiece.FRAGMENT||r==CodePiece.BOTH)return t+" "+e+"= sdEllipsoid("+o+","+i+");\n"},m.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.p,r=t.r,s=t.scope,p=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,n=new CodePiece(p);n.setBody(this.getVertexCode(o,e,i,r,s)),n.setIncludesFromMap(this.includes);var u=new CodePiece(p);return u.setBody(this.getFragmentCode(o,e,i,r,s)),u.setIncludesFromMap(this.includes),new ShaderCode(n,u,e)},C.prototype.getVertexCode=function(t,e,o,i,r){if(r==CodePiece.VERTEX||r==CodePiece.BOTH)return t+" "+e+"=("+o.x+"<"+i.x+")?"+o+":"+i+" ;\n"},C.prototype.getFragmentCode=function(t,e,o,i,r){if(r==CodePiece.FRAGMENT||r==CodePiece.BOTH)return t+" "+e+"= opU("+o+","+i+");\n"},C.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.d1,r=t.d2,s=t.scope,p=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,n=new CodePiece(p);n.setBody(this.getVertexCode(o,e,i,r,s)),n.setIncludesFromMap(this.includes);var u=new CodePiece(p);return u.setBody(this.getFragmentCode(o,e,i,r,s)),u.setIncludesFromMap(this.includes),new ShaderCode(n,u,e)},_.prototype.getVertexCode=function(t,e,o,i,r,s,p,n){if(n==CodePiece.VERTEX||n==CodePiece.BOTH)return"vec3 pa ="+o+"-"+i+",ba="+r+"-"+i+";\nfloat h = clamp(dot(pa,ba)/dot(ba,ba),0,0,1,0);"+t+" "+e+"=vec2(length(pa-ba*h)-mix("+s+","+p+",h*h*(3.0-2.0*h)),h);\n"},_.prototype.getFragmentCode=function(t,e,o,i,r,s,p,n){if(n==CodePiece.FRAGMENT||n==CodePiece.BOTH)return t+" "+e+"=sdStick("+o+","+i+","+r+","+s+","+p+");\n"},_.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.p,r=t.a,s=t.b,p=t.r1,n=t.r2,u=t.scope,a=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,d=new CodePiece(a);d.setBody(this.getVertexCode(o,e,i,r,s,p,n,u)),d.setIncludesFromMap(this.includes);var h=new CodePiece(a);return h.setBody(this.getFragmentCode(o,e,i,r,s,p,n,u)),h.setIncludesFromMap(this.includes),new ShaderCode(d,h,e)},f.prototype.getVertexCode=function(t,e,o,i){if(i==CodePiece.VERTEX||i==CodePiece.BOTH)return t+" "+e+"=sign("+o+");\n"},f.prototype.getFragmentCode=function(t,e,o,i){if(i==CodePiece.FRAGMENT||i==CodePiece.BOTH)return t+" "+e+"=sign("+o+");\n"},f.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.p,r=t.scope,s=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,p=new CodePiece(s);p.setBody(this.getVertexCode(o,e,i,r)),p.setIncludesFromMap(this.includes);var n=new CodePiece(s);return n.setBody(this.getFragmentCode(o,e,i,r)),n.setIncludesFromMap(this.includes),new ShaderCode(p,n,e)},O.prototype.getVertexCode=function(t,e,o,i,r,s,p){if(p==CodePiece.VERTEX||p==CodePiece.BOTH)return t+" "+e+"=mat2("+o+","+i+","+r+","+s+");\n"},O.prototype.getFragmentCode=function(t,e,o,i,r,s,p){if(p==CodePiece.FRAGMENT||p==CodePiece.BOTH)return t+" "+e+"=mat2("+o+","+i+","+r+","+s+");\n"},O.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.r1,r=t.r2,s=t.r3,p=t.r4,n=t.scope,u=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,a=new CodePiece(u);a.setBody(this.getVertexCode(o,e,i,r,s,p,n)),a.setIncludesFromMap(this.includes);var d=new CodePiece(u);return d.setBody(this.getFragmentCode(o,e,i,r,s,p,n)),d.setIncludesFromMap(this.includes),new ShaderCode(a,d,e)},T.prototype.getVertexCode=function(t,e,o){if(o==CodePiece.VERTEX||o==CodePiece.BOTH)return t+" "+e+"=pos;\n"},T.prototype.getFragmentCode=function(t,e,o){if(o==CodePiece.FRAGMENT||o==CodePiece.BOTH)return t+" "+e+"=pos;\n"},T.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.scope,r=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,s=new CodePiece(r);s.setBody(this.getVertexCode(o,e,i)),s.setIncludesFromMap(this.includes);var p=new CodePiece(r);return p.setBody(this.getFragmentCode(o,e,i)),p.setIncludesFromMap(this.includes),new ShaderCode(s,p,e)},v.prototype.getVertexCode=function(t,e,o){if(o==CodePiece.VERTEX||o==CodePiece.BOTH)return t+" "+e+"=aTime;\n"},v.prototype.getFragmentCode=function(t,e,o){if(o==CodePiece.FRAGMENT||o==CodePiece.BOTH)return t+" "+e+"=aTime;\n"},v.prototype.getCode=function(t){var e=t.out_var,o=t.out_type,i=t.scope,r=t.hasOwnProperty("order")?t.order:Number.MAX_VALUE,s=new CodePiece(r);s.setBody(this.getVertexCode(o,e,i)),s.setIncludesFromMap(this.includes);var p=new CodePiece(r);return p.setBody(this.getFragmentCode(o,e,i)),p.setIncludesFromMap(this.includes),new ShaderCode(s,p,e)}},function(t,e){subgraph={gcanvas:null,graph:null,graph_gl:null,init:function(){this.graph=new LGraph},changeCanvas:function(){var t=$("#layout_main_layout_panel_main div.w2ui-panel-content"),e=t.height(),o=t.width();this.graph_gl||(this.graph_gl=GL.create({width:o,height:e-20,alpha:!1}),this.graph_gl.canvas.id="subgraph"),this.gcanvas&&this.gcanvas.stopRendering();var i="<canvas id='SubGraph' class='graph' width='"+o+"' height='"+e+"'></canvas>";t.append(i),this.gcanvas=new LGraphCanvas(document.getElementById("SubGraph"),this.graph),this.gcanvas.background_image="img/grid.png",this.gcanvas.onClearRect=function(){gl.clearColor(.2,.2,.2,1),gl.clear(gl.COLOR_BUFFER_BIT)},this.gcanvas.onNodeSelected=function(t){vik.ui.updateLeftPanel(t)},this.gcanvas.onDropFile=function(t,e,o){if("json"==LGraphCanvas.getFileExtension(e)){var i=JSON.parse(t);this.graph.configure(i),main_node.mesh=i.mesh,vik.ui.reset()}}}}}]);